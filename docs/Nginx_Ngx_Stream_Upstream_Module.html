<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Nginx_Ngx_Stream_Upstream_Module</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Nginx_Ngx_Stream_Upstream_Module.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Nginx_Ngx_Stream_Upstream_Module</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:upstream">upstream</a> :: [Text] -&gt; [ConfStatement] -&gt; ConfStatement</li><li class="src short"><a href="#v:upstream_s">upstream_s</a> :: (<a href="Nginx_Common.html#t:HasContextUpstream">HasContextUpstream</a> f, <a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> f) =&gt; [Text] -&gt; [f] -&gt; ConfStatement</li><li class="src short"><a href="#v:server">server</a> :: [Text] -&gt; ConfStatement</li><li class="src short"><a href="#v:server_s">server_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Server">Server</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Server">Server</a> = <a href="#v:Server">Server</a> ConfStatement</li><li class="src short"><a href="#v:zone">zone</a> :: [Text] -&gt; ConfStatement</li><li class="src short"><a href="#v:zone_s">zone_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Zone">Zone</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Zone">Zone</a> = <a href="#v:Zone">Zone</a> ConfStatement</li><li class="src short"><a href="#v:state">state</a> :: [Text] -&gt; ConfStatement</li><li class="src short"><a href="#v:state_s">state_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:State">State</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:State">State</a> = <a href="#v:State">State</a> ConfStatement</li><li class="src short"><a href="#v:hash">hash</a> :: [Text] -&gt; ConfStatement</li><li class="src short"><a href="#v:hash_s">hash_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Hash">Hash</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Hash">Hash</a> = <a href="#v:Hash">Hash</a> ConfStatement</li><li class="src short"><a href="#v:least_conn">least_conn</a> :: [Text] -&gt; ConfStatement</li><li class="src short"><a href="#v:least_conn_s">least_conn_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Least_Conn">Least_Conn</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Least_Conn">Least_Conn</a> = <a href="#v:Least_Conn">Least_Conn</a> ConfStatement</li><li class="src short"><a href="#v:least_time">least_time</a> :: [Text] -&gt; ConfStatement</li><li class="src short"><a href="#v:least_time_s">least_time_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Least_Time">Least_Time</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Least_Time">Least_Time</a> = <a href="#v:Least_Time">Least_Time</a> ConfStatement</li><li class="src short"><a href="#v:health_check">health_check</a> :: [Text] -&gt; ConfStatement</li><li class="src short"><a href="#v:health_check_s">health_check_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Health_Check">Health_Check</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Health_Check">Health_Check</a> = <a href="#v:Health_Check">Health_Check</a> ConfStatement</li><li class="src short"><a href="#v:health_check_timeout">health_check_timeout</a> :: [Text] -&gt; ConfStatement</li><li class="src short"><a href="#v:health_check_timeout_s">health_check_timeout_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Health_Check_Timeout">Health_Check_Timeout</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Health_Check_Timeout">Health_Check_Timeout</a> = <a href="#v:Health_Check_Timeout">Health_Check_Timeout</a> ConfStatement</li><li class="src short"><a href="#v:match">match</a> :: [Text] -&gt; [ConfStatement] -&gt; ConfStatement</li><li class="src short"><a href="#v:match_s">match_s</a> :: (<a href="Nginx_Common.html#t:HasContextMatch">HasContextMatch</a> f, <a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> f) =&gt; [Text] -&gt; [f] -&gt; ConfStatement</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:upstream" class="def">upstream</a> :: [Text] -&gt; [ConfStatement] -&gt; ConfStatement</p><div class="doc"><p>Defines a group of servers. Servers can listen on different ports. In addition, servers listening on TCP and UNIX-domain sockets can be mixed.</p></div></div><div class="top"><p class="src"><a name="v:upstream_s" class="def">upstream_s</a> :: (<a href="Nginx_Common.html#t:HasContextUpstream">HasContextUpstream</a> f, <a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> f) =&gt; [Text] -&gt; [f] -&gt; ConfStatement</p><div class="doc"><p>Safe version of <code><a href="Nginx_Ngx_Stream_Upstream_Module.html#v:upstream">upstream</a></code></p></div></div><div class="top"><p class="src"><a name="v:server" class="def">server</a> :: [Text] -&gt; ConfStatement</p><div class="doc"><p>Defines the address and other parameters of a server. The address can be specified as a domain name or IP address with an obligatory port, or as a UNIX-domain socket path specified after the &#8220;unix:&#8221; prefix. A domain name that resolves to several IP addresses defines multiple servers at once.</p></div></div><div class="top"><p class="src"><a name="v:server_s" class="def">server_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Server">Server</a></p><div class="doc"><p>Safe version of <code><a href="Nginx_Ngx_Stream_Upstream_Module.html#v:server">server</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Server" class="def">Server</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Server" class="def">Server</a> ConfStatement</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Server" class="caption collapser" onclick="toggleSection('i:Server')">Instances</p><div id="section.i:Server" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:HasContextUpstream">HasContextUpstream</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Server">Server</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Server">Server</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:zone" class="def">zone</a> :: [Text] -&gt; ConfStatement</p><div class="doc"><p>Defines the name and size of the shared memory zone that keeps the group&#8217;s configuration and run-time state that are shared between worker processes. Several groups may share the same zone. In this case, it is enough to specify the zone size only once.</p></div></div><div class="top"><p class="src"><a name="v:zone_s" class="def">zone_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Zone">Zone</a></p><div class="doc"><p>Safe version of <code><a href="Nginx_Ngx_Stream_Upstream_Module.html#v:zone">zone</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Zone" class="def">Zone</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Zone" class="def">Zone</a> ConfStatement</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Zone" class="caption collapser" onclick="toggleSection('i:Zone')">Instances</p><div id="section.i:Zone" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:HasContextUpstream">HasContextUpstream</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Zone">Zone</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Zone">Zone</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:state" class="def">state</a> :: [Text] -&gt; ConfStatement</p><div class="doc"><p>Specifies a file that keeps the state of the dynamically configurable group. The state is currently limited to the list of servers with their parameters. The file is read when parsing the configuration and is updated each time the upstream configuration is changed. Changing the file content directly should be avoided. The directive cannot be used along with the  directive.</p></div></div><div class="top"><p class="src"><a name="v:state_s" class="def">state_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:State">State</a></p><div class="doc"><p>Safe version of <code><a href="Nginx_Ngx_Stream_Upstream_Module.html#v:state">state</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:State" class="def">State</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:State" class="def">State</a> ConfStatement</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:State" class="caption collapser" onclick="toggleSection('i:State')">Instances</p><div id="section.i:State" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:HasContextUpstream">HasContextUpstream</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:State">State</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:State">State</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:hash" class="def">hash</a> :: [Text] -&gt; ConfStatement</p><div class="doc"><p>Specifies a load balancing method for a server group where client-server mapping is based on the hashed key value. The key can contain text, variables, and their combinations (1.11.2). Usage example: hash $remote_addr; Note that adding or removing a server from the group may result in remapping most of the keys to different servers. The method is compatible with the Cache::Memcached Perl library.</p></div></div><div class="top"><p class="src"><a name="v:hash_s" class="def">hash_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Hash">Hash</a></p><div class="doc"><p>Safe version of <code><a href="Nginx_Ngx_Stream_Upstream_Module.html#v:hash">hash</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Hash" class="def">Hash</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Hash" class="def">Hash</a> ConfStatement</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Hash" class="caption collapser" onclick="toggleSection('i:Hash')">Instances</p><div id="section.i:Hash" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:HasContextUpstream">HasContextUpstream</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Hash">Hash</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Hash">Hash</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:least_conn" class="def">least_conn</a> :: [Text] -&gt; ConfStatement</p><div class="doc"><p>Specifies that a server group should use a load balancing method where a connection is passed to the server with the least number of active connections, taking into account weights of servers. If there are several such servers, they are tried in turn using a weighted round-robin balancing method.</p></div></div><div class="top"><p class="src"><a name="v:least_conn_s" class="def">least_conn_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Least_Conn">Least_Conn</a></p><div class="doc"><p>Safe version of <code><a href="Nginx_Ngx_Stream_Upstream_Module.html#v:least_conn">least_conn</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Least_Conn" class="def">Least_Conn</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Least_Conn" class="def">Least_Conn</a> ConfStatement</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Least_Conn" class="caption collapser" onclick="toggleSection('i:Least_Conn')">Instances</p><div id="section.i:Least_Conn" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:HasContextUpstream">HasContextUpstream</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Least_Conn">Least_Conn</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Least_Conn">Least_Conn</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:least_time" class="def">least_time</a> :: [Text] -&gt; ConfStatement</p><div class="doc"><p>Specifies that a group should use a load balancing method where a connection is passed to the server with the least average time and least number of active connections, taking into account weights of servers. If there are several such servers, they are tried in turn using a weighted round-robin balancing method.</p></div></div><div class="top"><p class="src"><a name="v:least_time_s" class="def">least_time_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Least_Time">Least_Time</a></p><div class="doc"><p>Safe version of <code><a href="Nginx_Ngx_Stream_Upstream_Module.html#v:least_time">least_time</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Least_Time" class="def">Least_Time</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Least_Time" class="def">Least_Time</a> ConfStatement</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Least_Time" class="caption collapser" onclick="toggleSection('i:Least_Time')">Instances</p><div id="section.i:Least_Time" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:HasContextUpstream">HasContextUpstream</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Least_Time">Least_Time</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Least_Time">Least_Time</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:health_check" class="def">health_check</a> :: [Text] -&gt; ConfStatement</p><div class="doc"><p>Enables periodic health checks of the servers in a group.</p></div></div><div class="top"><p class="src"><a name="v:health_check_s" class="def">health_check_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Health_Check">Health_Check</a></p><div class="doc"><p>Safe version of <code><a href="Nginx_Ngx_Stream_Upstream_Module.html#v:health_check">health_check</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Health_Check" class="def">Health_Check</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Health_Check" class="def">Health_Check</a> ConfStatement</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Health_Check" class="caption collapser" onclick="toggleSection('i:Health_Check')">Instances</p><div id="section.i:Health_Check" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:HasContextServer">HasContextServer</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Health_Check">Health_Check</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Health_Check">Health_Check</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:health_check_timeout" class="def">health_check_timeout</a> :: [Text] -&gt; ConfStatement</p><div class="doc"><p>Overrides the value for health checks.</p></div></div><div class="top"><p class="src"><a name="v:health_check_timeout_s" class="def">health_check_timeout_s</a> :: [Text] -&gt; <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Health_Check_Timeout">Health_Check_Timeout</a></p><div class="doc"><p>Safe version of <code><a href="Nginx_Ngx_Stream_Upstream_Module.html#v:health_check_timeout">health_check_timeout</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Health_Check_Timeout" class="def">Health_Check_Timeout</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Health_Check_Timeout" class="def">Health_Check_Timeout</a> ConfStatement</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Health_Check_Timeout" class="caption collapser" onclick="toggleSection('i:Health_Check_Timeout')">Instances</p><div id="section.i:Health_Check_Timeout" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:HasContextStream">HasContextStream</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Health_Check_Timeout">Health_Check_Timeout</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:HasContextServer">HasContextServer</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Health_Check_Timeout">Health_Check_Timeout</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> <a href="Nginx_Ngx_Stream_Upstream_Module.html#t:Health_Check_Timeout">Health_Check_Timeout</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:match" class="def">match</a> :: [Text] -&gt; [ConfStatement] -&gt; ConfStatement</p><div class="doc"><p>Defines the named test set used to verify server responses to health checks.</p></div></div><div class="top"><p class="src"><a name="v:match_s" class="def">match_s</a> :: (<a href="Nginx_Common.html#t:HasContextMatch">HasContextMatch</a> f, <a href="Nginx_Common.html#t:ToConfStatement">ToConfStatement</a> f) =&gt; [Text] -&gt; [f] -&gt; ConfStatement</p><div class="doc"><p>Safe version of <code><a href="Nginx_Ngx_Stream_Upstream_Module.html#v:match">match</a></code></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>